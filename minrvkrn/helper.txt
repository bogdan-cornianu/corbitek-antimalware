// minrvkrn.cpp : Defines the exported functions for the DLL application.
//

#include "stdafx.h"
#include "impdefs.h"
#include "pt.h"
#include <tchar.h>
#include <Sfc.h>
#include <Windows.h>
#include <WinNT.h>
#include <tchar.h>
#include <crtdbg.h>
#include <imagehlp.h>
#include <string>
#include <iostream>
#include <stddef.h>
#include <delayimp.h>
#include <wintrust.h>
#include <Shlwapi.h>
#include <assert.h>

#define STRICT
#define WIN32_LEAN_AND_MEAN
#define IMAGE_SIZEOF_NT_OPTIONAL64_HEADER    240

#pragma comment(lib, "imagehlp")
#pragma comment(lib, "sfc")
#pragma comment(lib, "Shlwapi.lib")

using namespace std;




int MalSum(TCHAR *filename)
{	

	return 0;
}




std::wstring s2ws(const std::string& s)
{
    int len;
    int slength = (int)s.length() + 1;
    len = MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, 0, 0); 
    wchar_t* buf = new wchar_t[len];
    MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, buf, len);
    std::wstring r(buf);
    delete[] buf;
    return r;
}



//	std::wstring stemp = s2ws(digest);
//	fhash =  stemp.c_str();
	//_tprintf(_T("dumphash: %s"),fhash);